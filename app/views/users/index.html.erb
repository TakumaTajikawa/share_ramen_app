<% provide(:title, 'ユーザー一覧') %>
<div id="container">
  <div class="user-container user-index-container">
    <h3 class="page-title page-title-users">ユーザー一覧
      <hr>
    </h3>
    <table>
      <% @users.each do |user| %>
        <tr>
          <td align="center" class="td-user-icon">
            <%= link_to user do %>
              <% if user.image? %>
                <%= image_tag user.image.thumb.url, size: "50",  class: "user-icon" %>
              <% else %>
                <%= image_tag "default.jpg", alt: "user-icon", size: "50", class: "user-icon" %>
              <% end %>
            <% end %>
          </td>
          <td align="left" class="td-user-name">
            <%= link_to user.name, user, class: "index-user-name" %>
          </td>
          <td>
            <% if current_user != user %>
              <div id="follow_form2">
                <% if current_user.following?(user) %>
                  <%= form_for(current_user, url: relationship_path(user), method: :delete, remote: true) do |f| %>
                    <%= f.submit "フォロー中", class: "following" %>
                  <% end %>
                <% else %>
                  <%= form_for(current_user, url: relationships_path, method: :post, remote: true) do |f| %>
                    <%= hidden_field_tag :following_id, user.id %>
                    <%= f.submit "フォローする", class: "to-follow" %>
                  <% end %>
                <% end %>
              </div>
            <% end %>
          </td>
        </tr>
      <% end %>
    </table>  
  </div>
</div>